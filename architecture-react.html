<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Visitor Counter Architecture (from TSX)</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #0f172a;
      --secondary: #1e293b;
      --accent: #0ea5e9;
      --text-light: #f8fafc;
      --text-dark: #334155;
      --text-gray: #64748b;
      --bg-light: #f1f5f9;
      --white: #ffffff;
      --slate-800: #1f2937;
      --slate-900: #0f172a;
      --slate-700: #334155;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Poppins', sans-serif;
      background: var(--bg-light);
      color: var(--text-dark);
      line-height: 1.5;
      padding: 30px 16px;
    }
    .container {
      max-width: 1100px;
      margin: 0 auto;
      background: var(--white);
      border-radius: 16px;
      box-shadow: 0 20px 50px rgba(0,0,0,0.08);
      overflow: hidden;
      border: 1px solid #e2e8f0;
    }
    .header {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 24px 28px;
      background: linear-gradient(90deg, #fff, #f8fafc);
      border-bottom: 1px solid #e2e8f0;
    }
    .header-icon {
      background: var(--accent);
      color: var(--white);
      width: 40px; height: 40px;
      display: inline-flex; align-items: center; justify-content: center;
      border-radius: 10px;
      font-size: 1.1rem;
    }
    .header h1 {
      font-size: 1.2rem;
      color: var(--primary);
    }
    .content {
      padding: 24px 28px;
      display: grid;
      gap: 18px;
      background: var(--slate-900);
    }
    .desc {
      color: var(--text-gray);
      font-size: 0.95rem;
      background: #0b1220;
      border-left: 4px solid var(--accent);
      padding: 12px 14px;
      border-radius: 0 10px 10px 0;
    }
    .diagram {
      background: #0b1220;
      border: 1px solid #1f2a44;
      border-radius: 12px;
      padding: 16px;
      overflow-x: auto;
    }
    .card {
      background: var(--slate-800);
      border: 1px solid var(--slate-700);
      border-left-width: 4px;
      border-radius: 10px;
      padding: 14px;
      color: #cbd5e1;
    }
    .card-blue { border-left-color: #3b82f6; }
    .card-orange { border-left-color: #fb923c; }
    .card-green { border-left-color: #22c55e; }
    .grid-3 {
      display: grid;
      grid-template-columns: 1fr;
      gap: 14px;
    }
    @media (min-width: 768px) {
      .grid-3 { grid-template-columns: repeat(3, 1fr); }
    }
    .footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 28px;
      border-top: 1px solid #e2e8f0;
      background: #fafafa;
      font-size: 0.9rem;
      color: var(--text-gray);
    }
    .links a {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
      color: var(--accent);
      padding: 8px 12px;
      border: 1px solid rgba(14,165,233,0.35);
      border-radius: 8px;
      background: #f0f9ff;
      transition: all .2s ease;
      margin-right: 8px;
    }
    .links a:hover {
      background: var(--accent);
      color: var(--white);
    }
    .tech-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: center;
      background: var(--slate-900);
      padding: 16px 0 24px;
    }
    .tag {
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 12px;
      border: 1px solid #1f2a44;
    }
    .tag-blue { background: #1e3a8a; color: #93c5fd; }
    .tag-orange { background: #7c2d12; color: #fdba74; }
    .tag-indigo { background: #1e1b4b; color: #c7d2fe; }
    .tag-pink { background: #831843; color: #f9a8d4; }
    .tag-purple { background: #3b0764; color: #e9d5ff; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <span class="header-icon">üó∫Ô∏è</span>
      <h1>Visitor Counter Architecture (rendered from TSX)</h1>
    </div>

    <div class="content">
      <p class="desc">
        This diagram is generated from the provided TSX component and illustrates the serverless flow:
        Browser fetches an AWS Lambda Function URL (ap-southeast-1), Lambda reads/writes a DynamoDB table and logs to
        CloudWatch. Terraform provisions the Lambda and DynamoDB resources.
      </p>

      <div class="diagram">
        <!-- Inline SVG ported from serverless-diagram-architecture.tsx -->
        <svg viewBox="0 0 900 600" class="w-full h-auto" aria-label="Visitor Counter Architecture Diagram">
          <defs>
            <linearGradient id="awsCloudGrad" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#1a1a2e" />
              <stop offset="100%" stop-color="#0f0f1a" />
            </linearGradient>
            <linearGradient id="lambdaGrad" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#ff9900" />
              <stop offset="100%" stop-color="#c77700" />
            </linearGradient>
            <linearGradient id="dynamoGrad" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#3b48cc" />
              <stop offset="100%" stop-color="#2d3a9e" />
            </linearGradient>
            <linearGradient id="cloudwatchGrad" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#e7157b" />
              <stop offset="100%" stop-color="#b8125f" />
            </linearGradient>
            <linearGradient id="terraformGrad" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#7b42bc" />
              <stop offset="100%" stop-color="#5c3198" />
            </linearGradient>
            <marker id="arrowBlue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
              <polygon points="0 0, 10 3.5, 0 7" fill="#60a5fa" />
            </marker>
            <marker id="arrowOrange" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
              <polygon points="0 0, 10 3.5, 0 7" fill="#ff9900" />
            </marker>
            <marker id="arrowPurple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
              <polygon points="0 0, 10 3.5, 0 7" fill="#a855f7" />
            </marker>
            <marker id="arrowPink" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
              <polygon points="0 0, 10 3.5, 0 7" fill="#e7157b" />
            </marker>
          </defs>

          <!-- Background -->
          <rect width="900" height="600" fill="#0f172a" />

          <!-- Title -->
          <text x="450" y="35" fill="#f8fafc" font-size="20" font-weight="bold" text-anchor="middle">üèóÔ∏è Visitor Counter Architecture</text>
          <text x="450" y="55" fill="#64748b" font-size="12" text-anchor="middle">Serverless Architecture on AWS</text>

          <!-- User/Browser Section -->
          <rect x="40" y="200" width="160" height="140" rx="12" fill="#1e293b" stroke="#3b82f6" stroke-width="2" />
          <text x="120" y="235" fill="#60a5fa" font-size="14" font-weight="bold" text-anchor="middle">üë§ User Browser</text>
          <rect x="70" y="250" width="100" height="60" rx="6" fill="#0f172a" stroke="#475569" stroke-width="1" />
          <rect x="75" y="255" width="90" height="12" rx="2" fill="#334155" />
          <circle cx="82" cy="261" r="3" fill="#ef4444" />
          <circle cx="92" cy="261" r="3" fill="#eab308" />
          <circle cx="102" cy="261" r="3" fill="#22c55e" />
          <text x="120" y="295" fill="#94a3b8" font-size="9" text-anchor="middle">maffindi.html</text>
          <text x="120" y="330" fill="#67e8f9" font-size="9" font-family="monospace" text-anchor="middle">fetch() API call</text>

          <!-- AWS Cloud Boundary -->
          <rect x="260" y="80" width="600" height="460" rx="15" fill="url(#awsCloudGrad)" stroke="#ff9900" stroke-width="2" stroke-dasharray="8,4" />
          <text x="280" y="108" fill="#ff9900" font-size="14" font-weight="bold">‚òÅÔ∏è AWS Cloud</text>
          <text x="280" y="125" fill="#fcd34d" font-size="10">Region: ap-southeast-1</text>

          <!-- Lambda Function URL -->
          <rect x="300" y="200" width="180" height="100" rx="10" fill="#1e1e2e" stroke="#ff9900" stroke-width="2" />
          <rect x="315" y="215" width="40" height="40" rx="6" fill="url(#lambdaGrad)" />
          <text x="335" y="242" fill="#fff" font-size="16" font-weight="bold" text-anchor="middle">Œª</text>
          <text x="410" y="235" fill="#fbbf24" font-size="11" font-weight="bold" text-anchor="middle">Lambda</text>
          <text x="410" y="250" fill="#fbbf24" font-size="11" font-weight="bold" text-anchor="middle">Function URL</text>
          <text x="390" y="275" fill="#a3a3a3" font-size="8" text-anchor="middle">visitor_counter.py</text>
          <text x="390" y="290" fill="#67e8f9" font-size="7" font-family="monospace" text-anchor="middle">*.lambda-url.ap-southeast-1.on.aws</text>

          <!-- DynamoDB -->
          <rect x="560" y="150" width="170" height="120" rx="10" fill="#1e1e2e" stroke="#3b48cc" stroke-width="2" />
          <rect x="580" y="170" width="40" height="40" rx="6" fill="url(#dynamoGrad)" />
          <text x="600" y="197" fill="#fff" font-size="14" font-weight="bold" text-anchor="middle">üìä</text>
          <text x="680" y="190" fill="#818cf8" font-size="11" font-weight="bold" text-anchor="middle">DynamoDB</text>
          <text x="645" y="225" fill="#a3a3a3" font-size="9" text-anchor="middle">Table: visitor_count</text>
          <text x="645" y="242" fill="#67e8f9" font-size="8" font-family="monospace" text-anchor="middle">PK: id</text>
          <text x="645" y="257" fill="#67e8f9" font-size="8" font-family="monospace" text-anchor="middle">Attr: count (Number)</text>

          <!-- CloudWatch Logs -->
          <rect x="560" y="310" width="170" height="100" rx="10" fill="#1e1e2e" stroke="#e7157b" stroke-width="2" />
          <rect x="580" y="325" width="40" height="40" rx="6" fill="url(#cloudwatchGrad)" />
          <text x="600" y="352" fill="#fff" font-size="14" font-weight="bold" text-anchor="middle">üìà</text>
          <text x="680" y="345" fill="#f472b6" font-size="11" font-weight="bold" text-anchor="middle">CloudWatch</text>
          <text x="680" y="360" fill="#f472b6" font-size="11" font-weight="bold" text-anchor="middle">Logs</text>
          <text x="645" y="390" fill="#a3a3a3" font-size="9" text-anchor="middle">Lambda execution logs</text>

          <!-- Terraform -->
          <rect x="300" y="380" width="180" height="120" rx="10" fill="#1e1e2e" stroke="#a855f7" stroke-width="2" />
          <rect x="320" y="400" width="45" height="45" rx="6" fill="url(#terraformGrad)" />
          <text x="342" y="430" fill="#fff" font-size="12" font-weight="bold" text-anchor="middle">TF</text>
          <text x="420" y="420" fill="#c084fc" font-size="11" font-weight="bold" text-anchor="middle">Terraform</text>
          <text x="420" y="438" fill="#c084fc" font-size="11" font-weight="bold" text-anchor="middle">IaC</text>
          <text x="390" y="465" fill="#a3a3a3" font-size="9" text-anchor="middle">main.tf</text>
          <text x="390" y="480" fill="#67e8f9" font-size="8" font-family="monospace" text-anchor="middle">Provisions infrastructure</text>

          <!-- Connection Lines -->
          <path d="M 200 270 L 300 250" stroke="#60a5fa" stroke-width="2" fill="none" marker-end="url(#arrowBlue)" />
          <text x="245" y="245" fill="#60a5fa" font-size="8" text-anchor="middle">HTTPS</text>
          <path d="M 480 230 L 560 210" stroke="#ff9900" stroke-width="2" fill="none" marker-end="url(#arrowOrange)" />
          <text x="520" y="205" fill="#fbbf24" font-size="8" text-anchor="middle">Read/Write</text>
          <path d="M 450 300 L 560 340" stroke="#e7157b" stroke-width="2" fill="none" marker-end="url(#arrowPink)" />
          <text x="500" y="335" fill="#f472b6" font-size="8" text-anchor="middle">Logs</text>
          <path d="M 370 380 L 370 300" stroke="#a855f7" stroke-width="2" stroke-dasharray="5,3" fill="none" marker-end="url(#arrowPurple)" />
          <text x="355" y="345" fill="#c084fc" font-size="8" text-anchor="middle">Deploy</text>
          <path d="M 480 440 Q 600 440 645 270" stroke="#a855f7" stroke-width="2" stroke-dasharray="5,3" fill="none" marker-end="url(#arrowPurple)" />
          <text x="580" y="380" fill="#c084fc" font-size="8" text-anchor="middle">Provision</text>
          <path d="M 300 270 L 200 290" stroke="#22c55e" stroke-width="1.5" stroke-dasharray="4,2" fill="none" />
          <text x="245" y="295" fill="#22c55e" font-size="8" text-anchor="middle">JSON response</text>

          <!-- Legend -->
          <rect x="760" y="420" width="90" height="110" rx="8" fill="#1e293b" stroke="#475569" stroke-width="1" />
          <text x="805" y="440" fill="#94a3b8" font-size="9" font-weight="bold" text-anchor="middle">Legend</text>
          <line x1="770" y1="455" x2="790" y2="455" stroke="#60a5fa" stroke-width="2" />
          <text x="800" y="458" fill="#a3a3a3" font-size="8">Request</text>
          <line x1="770" y1="475" x2="790" y2="475" stroke="#22c55e" stroke-width="2" stroke-dasharray="4,2" />
          <text x="800" y="478" fill="#a3a3a3" font-size="8">Response</text>
          <line x1="770" y1="495" x2="790" y2="495" stroke="#a855f7" stroke-width="2" stroke-dasharray="5,3" />
          <text x="800" y="498" fill="#a3a3a3" font-size="8">IaC</text>
          <line x1="770" y1="515" x2="790" y2="515" stroke="#ff9900" stroke-width="2" />
          <text x="800" y="518" fill="#a3a3a3" font-size="8">Data</text>

          <!-- Flow numbers -->
          <circle cx="225" cy="255" r="12" fill="#3b82f6" />
          <text x="225" y="259" fill="#fff" font-size="10" font-weight="bold" text-anchor="middle">1</text>
          <circle cx="520" cy="215" r="12" fill="#ff9900" />
          <text x="520" y="219" fill="#fff" font-size="10" font-weight="bold" text-anchor="middle">2</text>
          <circle cx="225" cy="285" r="12" fill="#22c55e" />
          <text x="225" y="289" fill="#fff" font-size="10" font-weight="bold" text-anchor="middle">3</text>

          <!-- Footer text inside SVG -->
          <text x="450" y="575" fill="#64748b" font-size="10" text-anchor="middle">Stack: HTML/JS + AWS Lambda (Python) + DynamoDB ‚Ä¢ IaC: Terraform</text>
        </svg>
      </div>

      <!-- Flow Description -->
      <div style="max-width: 1100px; margin: 16px auto 0; background:#1f2937; border:1px solid #334155; border-radius:12px; padding:18px;">
        <h3 style="color:#22d3ee; font-weight:700; margin-bottom:12px;">üìã Request Flow</h3>
        <div class="grid-3" style="font-size: 14px;">
          <div class="card card-blue">
            <div style="display:flex; align-items:center; gap:8px; margin-bottom:8px;">
              <span style="background:#3b82f6;color:#fff;width:24px;height:24px;border-radius:999px;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;">1</span>
              <span style="color:#60a5fa; font-weight:600;">Request</span>
            </div>
            <p style="color:#cbd5e1; font-size:12px;">User loads maffindi.html ‚Üí JavaScript calls fetch() to Lambda Function URL</p>
          </div>
          <div class="card card-orange">
            <div style="display:flex; align-items:center; gap:8px; margin-bottom:8px;">
              <span style="background:#fb923c;color:#fff;width:24px;height:24px;border-radius:999px;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;">2</span>
              <span style="color:#fb923c; font-weight:600;">Process</span>
            </div>
            <p style="color:#cbd5e1; font-size:12px;">Lambda reads count from DynamoDB, increments it, writes back, logs to CloudWatch</p>
          </div>
          <div class="card card-green">
            <div style="display:flex; align-items:center; gap:8px; margin-bottom:8px;">
              <span style="background:#22c55e;color:#fff;width:24px;height:24px;border-radius:999px;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;">3</span>
              <span style="color:#22c55e; font-weight:600;">Response</span>
            </div>
            <p style="color:#cbd5e1; font-size:12px;">Lambda returns JSON with updated count ‚Üí Browser displays visitor number</p>
          </div>
        </div>
      </div>

      <!-- Tech Stack -->
      <div class="tech-tags">
        <span class="tag tag-blue">HTML/JavaScript</span>
        <span class="tag tag-orange">AWS Lambda</span>
        <span class="tag tag-indigo">DynamoDB</span>
        <span class="tag tag-pink">CloudWatch</span>
        <span class="tag tag-purple">Terraform</span>
      </div>
    </div>

    <div class="footer">
      <span>Derived from serverless-diagram-architecture.tsx (static SVG, no React runtime required)</span>
      <div class="links">
        <a href="maffindi.html" title="Back to CV">‚¨Ö Back to CV</a>
      </div>
    </div>
  </div>
</body>
